# OS
### 버퍼링
> 프로세서와 입출력장치의 속도 차이로 생긴 유후시간이 없도록 입출력장치별로 입출력 버퍼를 두어, 
> 프로세서가 연산을 할 때 동시에 다른 작업을 입출력 하는 방법

##### 버퍼
> 프로세서가 어떤 작업을 처리하는 동안 버퍼에 다음으로 처리할 작업을 미리 읽어 저장해 두는 메모리이다.

### 스풀링
> 속도가 빠른 디스크를 버퍼처럼 사용하여 입출력장치에서 미리 읽는 것
> 별개의 오프라인 장치 사용, 여러 작업의 입출력과 계산을 함께 사용 가능
## 병행 프로세스와 상호 배제

#### 병행 프로세스
    프로세서 하나가 여러 프로세스를 동시에 실행하는 것처럼 보이는 것을 병행 프로세스라고 한다.
    
__독립 프로세스__
> 서로 독립적으로 작업을 수행하는 단일 처리 시스템 

__협력 프로세스__
> 다른 프로세스와 협력하면서 특정 기능을 수행하는 비동기적 병행 프로세스


#### 병행 프로세스의 해결 과제
+ 공유 자원을 __상호 배타적__ 으로 사용해야 한다.
+ 관련된 작업을 다른 프로세스가 수행할 수 없도록 __상호배제와 동기화__ 해야 한다.
+ 일정한 실행 결과를 보장하도록 __결정성 을 확보__ 해야 한다.
+ 병행 프로세스들의 __병렬 처리 능력을 극대화__ 해야 한다.

#### 선형 그래프와 병행 프로그램

+ __선형 그래프__ 는 순차적 활동을 표현하는 __방향성 비순환 그래프__ , 연산의 선행 제약을 정의하는데 유용, 사용하기 어려워 __fork__ 와 __join__ 구조 병행 문장 제시

#### 상호배제와 동기화
      다른 프로세스가 해당 데이터에서 접근할 수 없게 하는 것을 상호배제라고 한다.
      공유 자원을 동시에 사용하지 못하게 하는 것을 동기화라고 한다.
      
#### 임계 영역(Critical Section)
+ 임계 영역에는 여러 프로세스가 접근 가능
+ 어느 한순간에는 프로세스가 하나만 사용할 수 있는 영역 상호배제를 간편하게 구현 가능
+ 해결 방법은 __상호배제__ , __진행__ , __한정 대기 조건__ 을 만족하면 됨.  

#### 경쟁 상태
    경쟁 상태는 여러 프로세스가 동시에 공유 데이터에 접근할 때 접근 순서에 따라 실행 결과가 달라지는 상황이다.

#### 상호배제 방법
+ __데커의 알고리즘__ : 두 프로세스가 서로 통신하려고 공유 메모리를 사용하여 충돌 없이 단일 자원을 공유할 수 있도록 허용한다.
+ __TestAndSet테스 명령어__ : 기계를 비교하거나 단어 내용을 검사, 수정하는 특별한 하드웨어 명령어 사용으로 임계 영역 문제를 해결 가능.
+ __세마포__ : 다익스트라가 제안, 임계 구역에 여러 스레드가 들어갈 수 있음 __이진 세마포__ 와 __계수 세마포__ 가 있다.    
+ __모니터__ : 세마포의 단점을 극복하려고 등장. 핸슨이 제안. __순차적__ 으로만 사용할 수 있는 공유 자원이나 __공유 자원 그룹을 할당__ 하는데 사용하며, __데이터와 프로시저__ 를 포함하는 __병행성 구조__.
- 모니터의 경계에서 상호배제를 시행한다.
- 데이터 추상화와 정보 은폐 방법을 기초.
- wait과 signal 연산을 사용.
- 공유 데이터와 이 데이터를 처리하는 프로시저로 구성.
- 모니터 외부의 프로세스는 내부의 데이터에 접근하지 못함.
- 모니터 내부의 자원을 원하는 프로세스는 반드시 해당 모니터의 진입부를 호출하여 공유 데이터에 접근 가능.
- 모니터의 경계에서 상호배제를 시행한다.
##### 바쁜 대기의 개념과 이를 피할 수 있는 방법을 간단히 설명하시오.
> 대기 중인 스레드가 여전히 활성 상태이지만 아무 작업을 하지 않는 것.
예방 방법: 세마포를 사용 wait과 signal 연산으로 바쁜 대기 시기를 이동시켜야 한다.

##### 대기의 종류를 세 가지 이상 나열 간단히 설명하시오.
+ 무한 대기: 상대방 프로세스의 상태를 몰라 계속 기다리는 상태
+ 순환 대기: 프로세스들이 순환을
## 교착상태
    프로세스가 결코 일어나지 않을 사건을 기다리는 상태가 되면 교착(Dead lock)상태에 빠졌다고 말한다.
    교착상태는 시스템 자원에 요구가 뒤엉킨 상태로, 두 프로세스가 사용하는 자원을 서로 기다리고 있을 때 발생

#### 교착상태의 예
> 둘 이상의 작업이 대기 상태로 중요한 자원을 사용하려고 기다릴 때 발생
 자원의 요청과 해제가 중요

1. 스풀링 시스템에서 발생하는 교착 상태
2. 디스크를 공유할 때 발생하는 교착 상태
3. 네트워크에서 발생하는 교착 상태

#### 교착 상태의 발생 조건
1. 상호배제
> 자원을 최소 하나 이상 비공유해야 한다.
2. 점유와 대기
3. 비선점
> 자원은 선점할 수 없다. 자원을 점유하고 있는 프로세스가 끝나야 해제됨.
4. 순환 대기

#### 선점 자원과 비선점 자원의 차이
> 선점 차이는 부작용 없이 자원을 빼앗을 수 있다. 예로는 메모리, 버퍼, 프로세서 등이 있다. 반면에 비선점 자원은 하나의 프로세스에서 빼앗아 선점 할 수 없고, 부작용 없이 다른 프로세스에게 할당할 수 없는 자원.

#### 교착 상태의 해결 방법 3가지
> 1. 교착 상태가 발생하지 않도록 예방하는 방법
> 2. 교착 상태의 발생 가능성을 배제하지 않고 이를 적절히 회피하는 방법
> 3. 교착 상태를 허용하되 교착 상태를 탐지하여 다시 회복하는 방법

#### 교착 상태 예방
> 1.__자원의 상호배제 조건 방지__
  + 상호배제는 자원의 비공유가 전제되어야 한다.
> 2. __점유와 대기 조건 방지__
  + 프로세스가 작업을 수행하기 전에 필요한 자원을 모두 요청하고 획득
> 3. __비선점 조건 방지__
  + 이미 할당된 자원에 선점권이 없어야 한다.
> 4. __순환(환형) 대기__
  + 모든 자원에 일련의 순서를 부여하고 각 프로세스가 오름차순으로만 자원을 요청할 수 있게 한다.

#### 교착 상태 회피
> 1. __프로세스의 시작 중단__
  + 현재 수행 중인 모든 프로세스의 최대 자원 요청량과 새로운 프로세스의 최대 요청량을 합한 자원 요청량을 수용할 수 있으면 새로운 프로세스를 수행한다.
> 2. __자원 할당 거부(은행가 알고리즘)__
  + 프로세스가 요청한 자원을 할당했을 때 교착 상태가 발생할 수 있다면 요청한 자원을 할당하지 않는다. 
  + 자원의 할당 허용 여부를 결정하기 전에 미리 결정된 모든 자원의 최대 가능한 할당량을 시뮬레이션 하여 안전 여부를 검사한다.
  
  
#### 교착 상태 회복
+ 시스템 상태를 검사하는 교착 상태 탐지 알고리즘(은행가 알고리즘에서 자료구조가 비슷)
> Available, Allocation, Request
+ 교착 상태에서 회복시키는 알고리즘

 (1) __프로세스 중단
 
> 1. 교착 상태 프로세스를 모두 중단
> 2. 한 프로세스씩 중단 -> 중단할 때마다 교착상태 탐지 알고리즘

 (2) __자원 선점
> 1. 선점 자원 지원
> 2. 복귀
> 3. 기아

## 기아 상태
> 특정 프로세스의 우선순위가 낮아서 원하는 자원을 계속 할당 받지 못하는 상태

#### 해결 방안
+ 프로세스 우선수위를 수시로 변경
+ 오래 기다린 프로세스 우선순위 높여주기
+ 요청 순서대로 처리하는 FIFO(First In First Out)기반 요청 큐 사용

##### 하벤더의 교착 상태 예방 연구에서 기본 전제가 되는 것은?
> 상호배제 방지 / 점유와 대기 조건 방지 / 비선점 조건 방지 / 순환 대기 조건 방지

##### 점유와 대기 조건의 방지 방법과 문제점은?
> 방법 - 필요한 자원을 한꺼번에 요청하고 동시에 허용 될 때까지 프로세스 보류 문제점= 프로세스의 효율성이 낮다.

##### 교착 상태를 회복하는 해결 방법을 간단히 설명하시오.
> 1) __프로세스 중지__: 교착상태와 관련된 모든 프로세스 중단 or 한 프로세스씩 중지
> 2) __자원 선점__: 희생자의 선택 or 자원을 획득하기 바로 직전까지 복귀

##### 교착 상태를 벗어나려고 중단시킬 프로세스를 선정할때 고려할 기준을 나열하시오.
> 프로세스들의 우선순위, 프로세스가 수행된 시간과, 수행될 시간, 프로세스가 사용한 자원 형태와 수, 프로세스 종료를 위해 필요한 자원 수, 프로세스를 종료하는데 필요한 프로세스의 수, 프로세스가 대화식인지 일괄식인지 여부

##### 컴퓨터 시스템 환경과 관련되지 않은 교착 상태의 실례를 세 가지만 들어 보시오.
>  교통마비, 주차장에 차를 주차, ATM기기 부스

##### 하벤더의 교착 상태를 예방하는 세 가지의 기본 방법은?
> 점유와 대기 조건 방지, 비선점 조건 방지, 순환 대기 조건 방지

##### 교착 상태와 기아 상태의 주요 차이점은?
> __교착 상태__ 는 여러 프로세스가 동일 자원 점유를 요청할 때 발생
> __기아 상태__ 는 여러 프로세스가 부족한 자원을 점유하기 위해 경장할 때 특정 프로세스는 영원히 자원 할당이 안 되는 경우

##### 경쟁 상태와 교착 상태의 차이점은?
>  __교착 상태__ 는 둘 이상의 프로세스가 서로 남이 가진 자원을 요구하면서 양쪽 모두 작업 수행을 할 수 없이 대기 상태가 되는 것을 말하며,
__경쟁 상태__ 는 하나의 자원을 가지기 위해 서로 싸우는 상태를 말한다.

##### 자원 할당 그래프에 주기가 있는 시스템을 가정한다. 이 때 교착 상태라고 단정 할 수 있는가?
> 자원 할당 그래프에서 싸이클이 존재한다면 데드락이 될 가능성이 있다. 그러나 반드시 교착 상태인 것은 아니다.
